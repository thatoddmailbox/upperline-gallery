<link rel="stylesheet" href="css/projects.css" />

<p class="lead center-text">Manage Projects</p>


<div class="unapproved-label">Unapproved projects:</div><br>
<div class="row project-row">
	<% require "redcarpet"
	project_count = 0
	has_ended_div = false
	markdown = Redcarpet::Markdown.new(Redcarpet::Render::HTML.new(render_options = {:escape_html => true}), autolink: true, tables: true) %>

	<% unapproved.each do |project| %>
		<% has_ended_div = false %>
		<% if project_count % 3 == 0 %>
			<div class="row project-row">
		<% end %>
		<div class="col-md-4">
			<div class="project-thumb"><img src="<%= get_screenshot_url(project.id, project.url) %>"/></div>
			<div class="project-name"><%= h project.name %> - ID #<%= h project.id %></div>
			<div class="project-authors"><%= h project.authors %></div>
			<div class="project-owner">Owner: <%= h project.owner %><br/></div>
			<div class="project-url"><a href="<%= URI.encode project.url %>"><i class="glyphicon glyphicon-globe"></i> <%= h project.url %></a></div>
			<div class="project-desc">
			<% if project.description != "" %>
				<%= markdown.render(project.description) %>
			<% else %>
				<em class="no-desc">No description given.</em>
			<% end %>
			</div>

				<% if project.github_repo %>
					GitHub repository: <a href="<%= URI.encode project.github_repo %>"><%= h project.github_repo %></a><br/>
				<% end %>
				<a href="/approve?id=<%= project.id %>" class="btn btn-default btn-lg btn-block url_button">Approve</a>
		</div>
	</div>
	<% end %>
	<% if unapproved.length == 0 %>
		<em>No projects to approve.</em>
	<% end %>

</div>
